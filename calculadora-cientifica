#include <stdio.h>
#include <math.h>
#include <stdlib.h>

// Protótipos das funções de menu e cálculos
void exibirMenu();
double realizarCalculo(int opcao, double num1, double num2);

int main() {
    int opcao;
    double num1, num2, resultado;

    while (1) { // Loop infinito para a calculadora
        exibirMenu();
        printf("Escolha uma opcao: ");
        scanf("%d", &opcao);

        if (opcao == 0) {
            printf("Saindo da calculadora. Ate mais!\n");
            break; // Sai do loop
        }

        // Leitura dos números com base na opção
        if (opcao >= 1 && opcao <= 5) {
            printf("Digite o primeiro numero: ");
            scanf("%lf", &num1);
            printf("Digite o segundo numero: ");
            scanf("%lf", &num2);
            } 
            else if (opcao >= 6 && opcao <= 25) {
            printf("Digite o numero: ");
            scanf("%lf", &num1);
            } 
            else {
            printf("Opcao invalida. Tente novamente.\n");
            continue; // Volta ao inicio do loop
            }

        resultado = realizarCalculo(opcao, num1, num2);
        printf("Resultado: %.4lf\n\n", resultado);
    }

    return 0;
}

void exibirMenu() {
    printf("--- Calculadora Cientifica ---\n");
    printf("1.  Adicao (+)\n");
    printf("2.  Subtracao (-)\n");
    printf("3.  Multiplicacao (*)\n");
    printf("4.  Divisao (/)\n");
    printf("5.  Potencia (x^y)\n");
    printf("6.  Raiz Quadrada (sqrt(x))\n");
    printf("7.  Seno (sin(x))\n");
    printf("8.  Cosseno (cos(x))\n");
    printf("9.  Tangente (tan(x))\n");
    printf("10. Arcoseno (asin(x))\n");
    printf("11. Arcocosseno (acos(x))\n");
    printf("12. Arcotangente (atan(x))\n");
    printf("13. Logaritmo Natural (ln(x))\n");
    printf("14. Logaritmo Base 10 (log10(x))\n");
    printf("15. Exponencial (e^x)\n");
    printf("16. Valor Absoluto (|x|)\n");
    printf("17. Ceil (arredonda para cima)\n");
    printf("18. Floor (arredonda para baixo)\n");
    printf("19. Seno Hiperbolico (sinh(x))\n");
    printf("20. Cosseno Hiperbolico (cosh(x))\n");
    printf("21. Tangente Hiperbolica (tanh(x))\n");
    printf("22. Potencia de 2 (2^x)\n");
    printf("23. Raiz Cubica (cbrt(x))\n");
    printf("24. Exponencial de 10 (10^x)\n");
    printf("25. Fatorial (x!)\n");
    printf("0.  Sair\n");
    printf("------------------------------\n");
}

double realizarCalculo(int opcao, double num1, double num2) {
    switch (opcao) {
        case 1:
            return num1 + num2;
        case 2:
            return num1 - num2;
        case 3:
            return num1 * num2;
        case 4:
            if (num2 != 0) {
                return num1 / num2;
            } 
                else {
                printf("Erro: Divisao por zero!\n");
                return NAN; // Retorna Not a Number
                }
        case 5:
            return pow(num1, num2);
        case 6:
            return sqrt(num1);
        case 7:
            return sin(num1);
        case 8:
            return cos(num1);
        case 9:
            return tan(num1);
        case 10:
            return asin(num1);
        case 11:
            return acos(num1);
        case 12:
            return atan(num1);
        case 13:
            return log(num1);
        case 14:
            return log10(num1);
        case 15:
            return exp(num1);
        case 16:
            return fabs(num1);
        case 17:
            return ceil(num1);
        case 18:
            return floor(num1);
        case 19:
            return sinh(num1);
        case 20:
            return cosh(num1);
        case 21:
            return tanh(num1);
        case 22:
            return pow(2, num1);
        case 23:
            return cbrt(num1);
        case 24:
            return pow(10, num1);
        case 25: {
            if (num1 < 0) {
                printf("Erro: Fatorial de numero negativo nao existe.\n");
                return NAN;
            }
            long long int resultado_fatorial = 1;
            for (int i = 1; i <= (int)num1; i++) {
                resultado_fatorial *= i;
            }
            return (double)resultado_fatorial;
        }
        default:
            return NAN; // Not a Number
    }
}
